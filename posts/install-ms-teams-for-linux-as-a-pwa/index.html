<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"}>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff" />
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1b" />

    <meta name="description" content="Install MS Teams for Linux as a PWA">

    
        <title>Install MS Teams for Linux as a PWA | Michele&#39;s Piece of Mind</title>
    

    
    <style>
        :root {
          --background: #ffffff;
        }
        @media (prefers-color-scheme: dark) {
          :root {
            --background: #1b1b1b;
          }
        }
        html {
            background-color: var(--background);
        }
        body {
            background-color: var(--background);
        }
    </style>

    
    <link rel="stylesheet" type="text/css" href="/style.min.375e5ed55aac1492efe66cf6fd686d0af88cb56b12d6bafab6571d3b39c73883.css" media="all">
  </head>

  <body>
        
        <nav>
          <ul class="menu">
            
                <li><a tabindex="-1" class="menu-link" href="/"><u>H</u>ome</a></li>
            
                <li><a tabindex="-1" class="menu-link" href="/tags"><u>T</u>ags</a></li>
            
          </ul>
        </nav>
        




<div id="single-header">
  <h1>
    Install MS Teams for Linux as a PWA
  </h1>
  <div id="single-meta">
    
    
        <span class="datesub">Feb 2, 2025 &nbsp;&nbsp; m. Feb 2, 2025</span>
      

  </div>
</div>





<main><p>On my work computer (Ubuntu 24.04) I had <a href="https://flathub.org/apps/com.github.IsmaelMartinez.teams_for_linux"  target="_blank" rel="noreferrer nofollow">Microsoft Teams installed using flatpak</a>
, which is a wrapper around the webapp executed in chromium. As I have two accounts (one for my company and one for my client), I would like to be able to have both accounts open at the same time. I solved this issue by running a second instance of the webapp directly in chromium (not my main browser), in app mode (using the <code>--app</code> switch).</p>
<p>The other day, I realized there is a much cleaner and much more consistent way of doing this, installing it as a <strong>Progressive Web Applications</strong> (PWAs) with chromium.</p>
<h2 id="pwas">PWAs</h2>
<p>PWAs are web apps that provide a native feel, providing features such as offline access and push notifications.
PWAs use standard web technologies (HTML, CSS and JavaScript).</p>
<h2 id="microsoft-teams-on-chromium">Microsoft Teams on chromium</h2>
<p>Go to <a href="https://teams.microsoft.com/v2/"  target="_blank" rel="noreferrer nofollow">Microsoft Teams Web</a>
 and login. Clicking on the three dots in the top-right corner you should see a drop down menu, as in the picture.</p>
<p><p class="imgp">
  <img loading="lazy" src="/ms-teams-pwa-install.png" alt="Dropdown Menu"  />
</p>
</p>
<p>Click on &ldquo;Install Microsoft Teams&rdquo;.</p>
<p>Now, you will see that a desktop entry is created under <code>~/.local/share/applications</code>. This effectively means that you will be able to search for &ldquo;Microsoft Teams&rdquo; in the application menu. If you open the desktop entry file using a text editor, you will see that the entry is nothing more than chromium wrapping a PWA.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ini" data-lang="ini"><span class="line"><span class="cl"><span class="c1">#!/usr/bin/env xdg-open</span>
</span></span><span class="line"><span class="cl"><span class="k">[Desktop Entry]</span>
</span></span><span class="line"><span class="cl"><span class="na">Version</span><span class="o">=</span><span class="s">1.0</span>
</span></span><span class="line"><span class="cl"><span class="na">Terminal</span><span class="o">=</span><span class="s">false</span>
</span></span><span class="line"><span class="cl"><span class="na">Type</span><span class="o">=</span><span class="s">Application</span>
</span></span><span class="line"><span class="cl"><span class="na">Name</span><span class="o">=</span><span class="s">Microsoft Teams</span>
</span></span><span class="line"><span class="cl"><span class="na">Exec</span><span class="o">=</span><span class="s">/snap/bin/chromium --profile-directory=Default --app-id=cifhbcnohmdccbgoicgdjpfamggdegmo</span>
</span></span><span class="line"><span class="cl"><span class="na">Icon</span><span class="o">=</span><span class="s">chrome-cifhbcnohmdccbgoicgdjpfamggdegmo-Default</span>
</span></span><span class="line"><span class="cl"><span class="na">StartupWMClass</span><span class="o">=</span><span class="s">crx_cifhbcnohmdccbgoicgdjpfamggdegmo</span>
</span></span></code></pre></div><h2 id="installing-a-second-instance">Installing a second instance</h2>
<p>To run two instances with different profiles, it is necessary to use two different browser profile, otherwise it won&rsquo;t work.</p>
<p>After having switched to another profile (create one if you need to), do the same process over again, installing another PWA. After this you would have two applications called &ldquo;Microsoft Teams&rdquo;. Opening the desktop entry with a text editor, you can simply modify their titles, so that you will be able to distinguish them.</p>
<h2 id="uninstalling">Uninstalling</h2>
<p>If you wish to uninstall it, you can do so by launching the app and click on the three dots in the top-right corner.</p>
<p><p class="imgp">
  <img loading="lazy" src="/ms-teams-pwa-uninstall.png" alt="Dropdown Menu"  />
</p>
</p>
<h2 id="wrapping-up">Wrapping up</h2>
<p>Adopting this solution, I fixed a couple of issues that I had with my flatpak package, such as problems when sharing the screen and inconsistent notifications. This way it is all handled consistently through chromium.</p>
</main>




<br>

<footer>

<script defer>
  document.addEventListener("keydown", function (e) {
    if (document.activeElement.isContentEditable) {
      return false;
    }
    if (document.activeElement.tagName == "INPUT") {
      return false;
    }
    if (e.altKey || e.ctrlKey || e.shiftKey) {
      return false;
    }
    var key = e.key;
    if (key === "h") {
      e.preventDefault();
      e.stopPropagation();
      window.location.href = "/";
    } else if (key === "t") {
      e.preventDefault();
      e.stopPropagation();
      window.location.href = `https://${location.hostname}/tags`;
    } else if (key === "i") {
      e.preventDefault();
      e.stopPropagation();
      const inputs = document.querySelectorAll("input");
      for (let i = 0; i < inputs.length; i++) {
        if (inputs[i].offsetParent !== null) {
          inputs[i].selectionStart = inputs[i].selectionEnd =
            inputs[i].value.length;
          inputs[i].focus();
          break;
        }
      }
    }
    return false;
  });
</script>


<script defer>
  function throttle(fn, wait) {
    var time = Date.now();
    return function () {
      var now = Date.now()
      if (time + wait - now < 0) {
        fn();
        time = now;
      }
    };
  }

  function scrollHandler() {
    const anchors = Array.from(document.querySelectorAll("body h2, body h3"));

    function scrollCallback() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop;

      
      for (var i = 0; i < anchors.length; i++) {
        var anchorId = anchors[i].getAttribute("id");
        var link = document.querySelector(
          'nav ul li a[href="#' + anchorId + '"]',
        );
        if (link) {
          link.classList.remove("active-toc");
        }
      }

      
      for (var i = anchors.length - 1; i >= 0; i--) {
        var offsetTop = anchors[i].offsetTop;
        if (scrollTop > offsetTop - 75) {
          var anchorId = anchors[i].getAttribute("id");
          var link = document.querySelector(
            'nav ul li a[href="#' + anchorId + '"]',
          );
          if (link) {
            link.classList.add("active-toc");
            break;
          }
        }
      }
    }

    window.addEventListener(
      "scroll",
      throttle(scrollCallback, 300),
    );
  }
  setTimeout(scrollHandler, 100);
</script>

<script defer>
  function addCopyButtonToCodeBlocks() {
    
    const codeBlocks = document.querySelectorAll('code[class^="language-"]');

    codeBlocks.forEach((codeBlock) => {
      const copyButton = document.createElement("button");
      copyButton.classList.add("copy-code-button");
      copyButton.innerHTML = "copy";

      
      copyButton.addEventListener("click", () => {
        
        const elements = codeBlock.querySelectorAll(".cl");
        let codeToCopy = "";
        elements.forEach((element) => {
          codeToCopy += element.innerText;
        });
        navigator.clipboard.writeText(codeToCopy);

        
        copyButton.innerHTML = "copied!";
        setTimeout(() => {
          copyButton.innerHTML = "copy";
        }, 1500);
      });

      
      codeBlock.parentNode.before(copyButton);
    });
  }
  setTimeout(function () {
    addCopyButtonToCodeBlocks();
  }, 100);
</script>

<script>
window.store = {
    
    "https:\/\/mnalli.github.io\/posts\/install-ms-teams-for-linux-as-a-pwa\/": {
        "title": "Install MS Teams for Linux as a PWA",
        "tags": [],
        "content": "On my work computer (Ubuntu 24.04) I had Microsoft Teams installed using flatpak , which is a wrapper around the webapp executed in chromium. As I have two accounts (one for my company and one for my client), I would like to be able to have both accounts open at the same time. I solved this issue by running a second instance of the webapp directly in chromium (not my main browser), in app mode (using the --app switch).\nThe other day, I realized there is a much cleaner and much more consistent way of doing this, installing it as a Progressive Web Applications (PWAs) with chromium.\nPWAs PWAs are web apps that provide a native feel, providing features such as offline access and push notifications. PWAs use standard web technologies (HTML, CSS and JavaScript).\nMicrosoft Teams on chromium Go to Microsoft Teams Web and login. Clicking on the three dots in the top-right corner you should see a drop down menu, as in the picture.\nClick on \u0026ldquo;Install Microsoft Teams\u0026rdquo;.\nNow, you will see that a desktop entry is created under ~/.local/share/applications. This effectively means that you will be able to search for \u0026ldquo;Microsoft Teams\u0026rdquo; in the application menu. If you open the desktop entry file using a text editor, you will see that the entry is nothing more than chromium wrapping a PWA.\n#!/usr/bin/env xdg-open [Desktop Entry] Version=1.0 Terminal=false Type=Application Name=Microsoft Teams Exec=/snap/bin/chromium --profile-directory=Default --app-id=cifhbcnohmdccbgoicgdjpfamggdegmo Icon=chrome-cifhbcnohmdccbgoicgdjpfamggdegmo-Default StartupWMClass=crx_cifhbcnohmdccbgoicgdjpfamggdegmo Installing a second instance To run two instances with different profiles, it is necessary to use two different browser profile, otherwise it won\u0026rsquo;t work.\nAfter having switched to another profile (create one if you need to), do the same process over again, installing another PWA. After this you would have two applications called \u0026ldquo;Microsoft Teams\u0026rdquo;. Opening the desktop entry with a text editor, you can simply modify their titles, so that you will be able to distinguish them.\nUninstalling If you wish to uninstall it, you can do so by launching the app and click on the three dots in the top-right corner.\nWrapping up Adopting this solution, I fixed a couple of issues that I had with my flatpak package, such as problems when sharing the screen and inconsistent notifications. This way it is all handled consistently through chromium.\n", 
        "url": "https:\/\/mnalli.github.io\/posts\/install-ms-teams-for-linux-as-a-pwa\/"
    },
    
    "https:\/\/mnalli.github.io\/posts\/": {
        "title": "Posts",
        "tags": [],
        "content": "", 
        "url": "https:\/\/mnalli.github.io\/posts\/"
    },
    
    "https:\/\/mnalli.github.io\/posts\/microsoft-intune-on-ubuntu\/": {
        "title": "Microsoft Intune on Ubuntu 24.04 LTS",
        "tags": [],
        "content": "As we can see in the official installation guide , as of today 25/11/2024, the Microsoft Intune app is not available for Ubuntu 24.04 (noble).\nWe can verify this by searching for intune-platform in the package list of microsoft repository for Ubuntu 22.04 and 24.04:\njammy: https://packages.microsoft.com/ubuntu/22.04/prod/dists/jammy/main/binary-amd64/Packages noble: https://packages.microsoft.com/ubuntu/24.04/prod/dists/noble/main/binary-amd64/Packages As of today, you will find it only in the first one.\nFollow the official installation guide for Ubuntu 22.04, then come back here.\nHey! Nice to see you again :)\nInstall intune-portal # ignore recommendations, i.e. microsoft edge sudo apt install intune-portal --no-install-recommends This will fail due to two dependencies that are not present on noble:\nlibjavascriptcoregtk-4.0 libwebkit2gtk-4.0 On noble only the updated versions are present:\nlibjavascriptcoregtk-4.1 libwebkit2gtk-4.1 Change the file /etc/apt/sources.list.d/ubuntu.sources by adding the following lines:\n## The following are only required because of intune-portal (not packaged for noble) ## libjavascriptcoregtk-4.0-18 libwebkit2gtk-4.0-37 Types: deb URIs: http://archive.ubuntu.com/ubuntu Suites: jammy jammy-updates Components: main universe restricted multiverse Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg ## Ubuntu security updates. Aside from URIs and Suites, ## this should mirror your choices in the previous section. Types: deb URIs: http://security.ubuntu.com/ubuntu/ Suites: jammy-security Components: main universe restricted multiverse Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg This will add jammy repositories.\nWARNING: mixing repositories from different distributions it is usually not a good idea and must be done carefully. Use jammy repositories only in this case and do not install other packages from it. When you install new packages check carefully what apt will do in advance.\nsudo apt update sudo apt install intune-portal --no-install-recommends Try to start Intune:\nintune-portal The app should start, but this does not mean that it would work correctly. Try to follow this tutorial.\nKeep an eye on systemd journal for error logs:\njournalctl -xe If everything goes well, great! Otherwise go on.\nInstall Java 11 JRE As suggested in this tutorial , we have to install openjdk-11-jre. If this is the case, you should see some relevant errors in systemd journal logs.\nsudo apt install openjdk-11-jre Log out, log in and try to run the app again.\nIf everything goes well, great! Otherwise go on.\ngnome-keyring In systemd journal logs you may read some errors related to a missing default keyring. This is especially likely if, like me, you are not using Gnome as desktop environment (I use KDE).\nAs we can see, intune-portal depends on gnome-keyring.\napt depends intune-portal To manage Gnome keyrings, install seahorse.\nsudo apt install seahorse seahorse Create a password keyring, then right-click it and \u0026ldquo;Set as default\u0026rdquo;. This is the keyring that will be used by Intune.\nAs last step, pray for it to be working and try again to complete the device enrollment .\n", 
        "url": "https:\/\/mnalli.github.io\/posts\/microsoft-intune-on-ubuntu\/"
    },
    
    "https:\/\/mnalli.github.io\/": {
        "title": "",
        "tags": [],
        "content": "Michele\u0026rsquo;s Piece of Mind ", 
        "url": "https:\/\/mnalli.github.io\/"
    },
    
    "https:\/\/mnalli.github.io\/categories\/": {
        "title": "Categories",
        "tags": [],
        "content": "", 
        "url": "https:\/\/mnalli.github.io\/categories\/"
    },
    
    "https:\/\/mnalli.github.io\/tags\/": {
        "title": "Tags",
        "tags": [],
        "content": "", 
        "url": "https:\/\/mnalli.github.io\/tags\/"
    },
    
}
</script>
<script defer src="/js/lunr.js"></script>
<script defer src="/js/search.js"></script>

</footer>

</body>
</html>

